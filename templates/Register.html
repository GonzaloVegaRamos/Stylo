<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Login con Google - Supabase</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  </head>
  <body>
    <h1>Login con Google</h1>
    <button id="google-login">Iniciar sesión con Google</button>

    <script>
      // Inicializa Supabase con tu URL y anon key (pon las tuyas reales aquí)
      const supabaseUrl = "https://fcuoobbozbpwobfzbfwb.supabase.co";
      const supabaseAnonKey =
        "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZjdW9vYmJvemJwd29iZnpiZndiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDEzMDk2OTUsImV4cCI6MjA1Njg4NTY5NX0.kBnE22zwoUuTU2LORXr5llC2XmkM92s1nPAIG4yisyQ";
      const supabaseClient = supabase.createClient(
        supabaseUrl,
        supabaseAnonKey
      );

      document
        .getElementById("google-login")
        .addEventListener("click", async () => {
          const { error } = await supabaseClient.auth.signInWithOAuth({
            provider: "google",
            options: {
              // Aquí puedes poner redirectTo si quieres que después vuelva a tu web
              redirectTo: window.location.origin,
            },
          });
          if (error) {
            alert("Error al iniciar sesión: " + error.message);
          }
        });

      // Opcional: para manejar la sesión después del redirect
      window.onload = async () => {
        const {
          data: { session },
        } = await supabaseClient.auth.getSession();

        if (session) {
          console.log("Usuario logueado:", session.user);
          // Por ejemplo, mostrar mensaje o redirigir
          document.body.innerHTML += `<p>Bienvenido, ${session.user.email}</p>`;
        } else {
          console.log("No hay sesión activa");
        }
      };
    </script>
  </body>
</html>
